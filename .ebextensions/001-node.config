commands:
  install_node12:
    command: |
      NODE_VERSION=`yum info installed nodejs | grep Version`
      if ! [[ $NODE_VERSION =~ ' 12.' ]]; then
        echo 'Installing node 12'
        # Drop old node_6 repo because it has conflicting name
        rm -f /etc/yum.repos.d/nodesource-el.repo
        yum remove -y nodejs
        # Install node_12
        curl -sL https://rpm.nodesource.com/setup_12.x | bash -
        yum clean all
        yum install -y nodejs
      fi
  install_yarn:
    command: |
      yum list installed yarn > /dev/null 2>&1
      if [ $? = 1 ]; then
        wget https://dl.yarnpkg.com/rpm/yarn.repo -O /etc/yum.repos.d/yarn.repo
        yum -y install yarn
      fi
  install_libpng:
    command: |
      yum -y install libpng-devel
